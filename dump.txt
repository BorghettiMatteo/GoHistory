#
bmZpZyBmaWxlCglfLCBlcnIgOj0gb3MuU3RhdCgiL2hvbWUvbWF0dGVvL3Byb2dyYW1tYXppb25lL0dvQ2xpcGJvYXJkL0dvSGlzdG9yeS9jb25maWcueG1sIiAvKiBvcy5BcmdzWzFdICovKQoJaWYgZXJyICE9IG5pbCB7CgkJcHJpbnRsbigiRVJST1I6IEZpbGUgZG9lcyBub3QgZXhpc3QgZ29kZGFtaXQiKQoJCXJldHVybgoJfQoJLy9pZiB0aGVyZSBpcyB0aGUgY29uZmlnZmlsZSwgZHVtcCBhbmQgdW5tYXJzaGFsbAoJZHVtcCwgZXJyIDo9IG9zLlJlYWRGaWxlKCIvaG9tZS9tYXR0ZW8vcHJvZ3JhbW1hemlvbmUvR29DbGlwYm9hcmQvR29IaXN0b3J5L2NvbmZpZy54bWwiIC8qIG9zLkFyZ3NbMV0gKi8pCglpZiBlcnIgIT0gbmlsIHsKCQlwcmludGxuKCJFUlJPUjogQ2Fubm90IGxvYWQgY29uZmlndXJhdGlvbiIpCgkJcGFuaWMoZXJyKQoJfQoKCS8vdW5tYXJzaGFsIHN0cnVjdA==
#
cGFja2FnZSBtb2RlbHMKCmltcG9ydCAoCgkiZW5jb2RpbmcveG1sIgoJIm9zIgopCgp0eXBlIENvbmZpZ3VyYXRpb24gc3RydWN0IHsKCVhNTE5hbWUgICAgICAgICAgIHhtbC5OYW1lIGB4bWw6IkNvbmZpZ3VyYXRpb24iYAoJQ2xpcEd1aSAgICAgICAgICAgc3RyaW5nICAgYHhtbDoiY2xpcEd1aSJgCglEdW1wRmlsZVBhdGggICAgICBzdHJpbmcgICBgeG1sOiJEdW1wRmlsZVBhdGgiYAoJQnVmZmVyTGVuZ2h0ICAgICAgaW50ICAgICAgYHhtbDoiQnVmZmVyTGVuZ2h0ImAKCUJhY2tVcEZyZXF1ZW5jeSAgIHN0cmluZyAgIGB4bWw6IkJhY2tVcEZyZXF1ZW5jeSJgCglCYWNrVVNwdHJhdGVneSAgICBzdHJpbmcgICBgeG1sOiJCYWNrVXBTdHJhdGVneSJgCglCYWNrVXBTdG9yYWdlUGF0aCBzdHJpbmcgICBgeG1sOiJCYWNrVXBTdG9yYWdlUGF0aCJgCn0KCmZ1bmMgKGMgKkNvbmZpZ3VyYXRpb24pIExvYWRDb25maWd1cmF0aW9uKCkgewoJLy9sb2FkIHBhdGggb2YgY29uZmlndXJhdGlvbgoKCS8vY2hlY2sgaWYgZmlsZSBleGlzdCBpbiByb290IGRpcmVjdG9yeQoJLy9hcmdzWzFdIGNvbnRhaW5zIHRoZSBwYXRoIHRvIHRoZSBjb25maWcgZmlsZQoJXywgZXJyIDo9IG9zLlN0YXQoIi9ob21lL21hdHRlby9wcm9ncmFtbWF6aW9uZS9Hb0NsaXBib2FyZC9Hb0hpc3RvcnkvY29uZmlnLnhtbCIgLyogb3MuQXJnc1sxXSAqLykKCWlmIGVyciAhPSBuaWwgewoJCXByaW50bG4oIkVSUk9SOiBGaWxlIGRvZXMgbm90IGV4aXN0IGdvZGRhbWl0IikKCQlyZXR1cm4KCX0KCS8vaWYgdGhlcmUgaXMgdGhlIGNvbmZpZ2ZpbGUsIGR1bXAgYW5kIHVubWFyc2hhbGwKCWR1bXAsIGVyciA6PSBvcy5SZWFkRmlsZSgiL2hvbWUvbWF0dGVvL3Byb2dyYW1tYXppb25lL0dvQ2xpcGJvYXJkL0dvSGlzdG9yeS9jb25maWcueG1sIiAvKiBvcy5BcmdzWzFdICovKQoJaWYgZXJyICE9IG5pbCB7CgkJcHJpbnRsbigiRVJST1I6IENhbm5vdCBsb2FkIGNvbmZpZ3VyYXRpb24iKQoJCXBhbmljKGVycikKCX0KCgkvL3VubWFyc2hhbCBzdHJ1Y3QKCWVyciA9IHhtbC5Vbm1hcnNoYWwoZHVtcCwgYykKCWlmIGVyciAhPSBuaWwgewoJCXBhbmljKGVycikKCX0KfQo=
#
Ly90aGlzIGZpbGUgd2lsbCBkZWZpbmUgZXZlcnl0aGluZyBuZWVkZWQgdG8gcnVuIGJhY2t1cCBqb2Igb24gdGhlIGNsaXBib2FyZCBmaWxlCgpwYWNrYWdlIG1vZGVscwoKaW1wb3J0ICgKCSJieXRlcyIKCSJjb21wcmVzcy9nemlwIgopCgp0eXBlIENvbmNyZXRlQmFja1VwU3RyYXRlZ3kgaW50ZXJmYWNlIHsKCURvKHNjaGVkdWxlIHN0cmluZykKCUluaXRCYWNrdXAoYyAqQ29uZmlndXJhdGlvbikKfQoKdHlwZSBJbnRlcm5Kb2Igc3RydWN0IHsKCWZpbGVwYXRoIHN0cmluZwp9Cgp0eXBlIEJhY2t1cCBzdHJ1Y3QgewoJQmFja3VwICAgQ29uY3JldGVCYWNrVXBTdHJhdGVneQoJU2NoZWR1bGUgc3RyaW5nCglLZXlzICAgICBzdHJpbmcKfQoKZnVuYyAoYyAqQmFja3VwKSBFeGVjdXRlQmFja3VwKCkgewoJYy5CYWNrdXAuRG8oYy5TY2hlZHVsZSkKfQoKZnVuYyAoYyAqQmFja3VwKSBTZXR1cEJhY2t1cChjb25maWcgKkNvbmZpZ3VyYXRpb24pIHsKCXN3aXRjaCBjb25maWcuQmFja1VTcHRyYXRlZ3kgewoJY2FzZSAiZmlsZXN5c3RlbSI6CgkJYy5CYWNrdXAgPSBuZXcoRmlsZVN5c3RlbUJhY2t1cCkKCWNhc2UgImF3cyI6CgkJYy5CYWNrdXAgPSBuZXcoQVdTQmFja3VwcGVyKQoJfQoJYy5TY2hlZHVsZSA9IGNvbmZpZy5CYWNrVXBGcmVxdWVuY3kKCWMuQmFja3VwLkluaXRCYWNrdXAoY29uZmlnKQp9CgpmdW5jIENyZWF0ZUNvbXByZXNzZWRMb2coZHVtcCBbXWJ5dGUpIChbXWJ5dGUsIGVycm9yKSB7Cgl2YXIgYnl0ZXNCdWZmIGJ5dGVzLkJ1ZmZlcgoJd3JpdGVyIDo9IGd6aXAuTmV3V3JpdGVyKCZieXRlc0J1ZmYpCglfLCBlcnIgOj0gd3JpdGVyLldyaXRlKGR1bXApCgl3cml0ZXIuRmx1c2goKQoJZGVmZXIgd3JpdGVyLkNsb3NlKCkKCWlmIGVyciAhPSBuaWwgewoJCXJldHVybiBuaWwsIGVycgoJfQoJcmV0dXJuIGJ5dGVzQnVmZi5CeXRlcygpLCBuaWwKfQo=
#
cmV0dXJuCgpTVFJJTkdWQUxVRTogZSBleGlzdCBpbiByb290IGRpcmVjdG9yeQogICAgICAgIC8vYXJnc1sxXSBjb250YWlucyB0aGUgcGF0aCB0byB0aGUgY29uZmlnIGZpbGUKICAgICAgICBfLCBlcnIgOj0gb3MuU3RhdCgiL2hvbWUvbWF0dGVvL3Byb2dyYW1tYXppb25lL0dvQ2xpcGJvYXJkL0dvSGlzdG9yeS9jb25maWcueG1sIiAvKiBvcy5BcmdzWzFdICovKQogICAgICAgIGlmIGVyciAhPSBuaWwgewogICAgICAgICAgICAgICAgcHJpbnRsbigiRVJST1I6IEZpbGUgZG9lcyBub3QgZXhpc3QgZ29kZGFtaXQiKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIC8vaWYgdGhlcmUgaXMgdGhlIGNvbmZpZ2ZpbGUsIGR1bXAgYW5kIHVubWFyc2hhbGwKICAgICAgICBkdW1wLCBlcnIgOj0gb3MuUmVhZEZpbGUoIi9ob21lL21hdHRlby9wcm9ncmFtbWF6aW9uZS9Hb0NsaXBib2FyZC9Hb0hpc3RvcnkvY29uZmlnLnhtbCIgLyogb3MuQXJnc1sxXSAqLykKICAgICAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICAgICAgICAgIHByaW50bG4oIkVSUk9SOgpFcnJvciBzZWFyY2hpbmcgZm9yIGJhY2t1cEZvbGRlcjogc3RhdCAvaG9tZS9tYXR0ZW8vcHJvZ3JhbW1hemlvbmUvR29DbGlwYm9hcmQvR29IaXN0b3J5L2JhY2t1cDogbm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeQpTVUNDRVNTOiBzdWNjZXNzZnVsbHkgYmFja3VwcGVkIG15IGNsaXBib2FyZCBoaXN0b3J5LCBob29yYXkKU1RSSU5HVkFMVUU6IHBhY2thZ2UgbW9kZWxzCgppbXBvcnQgKAogICAgICAgICJlbmNvZGluZy94bWwiCiAgICAgICAgIm9zIgopCgp0eXBlIENvbmZpZ3VyYXRpb24gc3RydWN0IHsKICAgICAgICBYTUxOYW1lICAgICAgICAgICB4bWwuTmFtZSBgeG1sOiJDb25maWd1cmF0aW9uImAKICAgICAgICBDbGlwR3VpICAgICAgICAgICBzdHJpbmcgICBgeG1sOiJjbGlwR3VpImAKICAgICAgICBEdW1wRmlsZVBhdGggICAgICBzdHJpbmcgICBgeG1sOiJEdW1wRmlsZVBhdGgiYAogICAgICAgIEJ1ZmZlckxlbmdodCAgICAgIGludCAgICAgIGB4bWw6IkJ1ZmZlckxlbmdodCJgCiAgICAgICAgQmFja1VwRnJlcXVlbmN5ICAgc3RyaW5nICAgYHhtbDoiQmFja1VwRnJlcXVlbmN5ImAKICAgICAgICBCYWNrVVNwdHJhdGVneSAgICBzdHJpbmcgICBgeG1sOiJCYWNrVXBTdHJhdGVneSJgCiAgICAgICAgQmFja1VwU3RvcmFnZVBhdGggc3RyaW5nICAgYHhtbDoiQmFja1VwU3RvcmFnZVBhdGgiYAp9CgpmdW5jIChjICpDb25maWd1cmF0aW9uKSBMb2FkQ29uZmlndXJhdGlvbigpIHsKICAgICAgICAvL2xvYWQgcGF0aCBvZiBjb25maWd1cmF0aW9uCgogICAgICAgIC8vY2hlY2sgaWYgZmlsZSBleGlzdCBpbiByb290IGRpcmVjdG9yeQogICAgICAgIC8vYXJnc1sxXSBjb250YWlucyB0aGUgcGF0aCB0byB0aGUgY29uZmlnIGZpbGUKICAgICAgICBfLCBlcnIgOj0gb3MuU3RhdCgiL2hvbWUvbWF0dGVvL3Byb2dyYW1tYXppb25lL0dvQ2xpcGJvYXJkL0dvSGlzdG9yeS9jb25maWcueG1sIiAvKiBvcy5BcmdzWzFdICovKQogICAgICAgIGlmIGVyciAhPSBuaWwgewogICAgICAgICAgICAgICAgcHJpbnRsbigiRVJST1I6IEZpbGUgZG9lcyBub3QgZXhpc3QgZ29kZGFtaXQiKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIC8vaWYgdGhlcmUgaXMgdGhlIGNvbmZpZ2ZpbGUsIGR1bXAgYW5kIHVubWFyc2hhbGwKICAgICAgICBkdW1wLCBlcnIgOj0gb3MuUmVhZEZpbGUoIi9ob21lL21hdHRlby9wcm9ncmFtbWF6aW9uZS9Hb0NsaXBib2FyZC9Hb0hpc3RvcnkvY29uZmlnLnhtbCIgLyogb3MuQXJnc1sxXSAqLykKICAgICAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICAgICAgICAgIHByaW50bG4oIkVSUk9SOiBDYW5ub3QgbG9hZCBjb25maWd1cmF0aW9uIikKICAgICAgICAgICAgICAgIHBhbmljKGVycikKICAgICAgICB9CgogICAgICAgIC8vdW5tYXJzaGFsIHN0cnVjdAogICAgICAgIGVyciA9IHhtbC5Vbm1hcnNoYWwoZHVtcCwgYykKICAgICAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICAgICAgICAgIHBhbmljKGVycikKICAgICAgICB9Cn0KClNUUklOR1ZBTFVFOiBwYWNrYWdlIGpvYm1vZGVscwoKaW1wb3J0ICgKICAgICAgICAibWFpbi9tb2RlbHMiCiAgICAgICAgIm9zIgopCgp0eXBlIFJlc3RvcmVCYWNrdXBGaWxlU3lzdGVtIHN0cnVjdHt9CgpmdW5jIGluaXRDb25maWcoKSAqbW9kZWxzLkNvbmZpZ3VyYXRpb24gewogICAgICAgIHZhciBjb25maWcgPSBuZXcobW9kZWxzLkNvbmZpZ3VyYXRpb24pCiAgICAgICAgY29uZmlnLkxvYWRDb25maWd1cmF0aW9uKCkKICAgICAgICByZXR1cm4gY29uZmlnCn0KCmZ1bmMgKHIgKlJlc3RvcmVCYWNrdXBGaWxlU3lzdGVtKSBSdW5Kb2IoKSB7CiAgICAgICAgLy8gZmlyc3QgZmluZCB0aGUgbGF0ZXN0IGJhY2t1cAogICAgICAgIGJhY2t1cFBhdGggOj0gaW5pdENvbmZpZygpLkJhY2tVcFN0b3JhZ2VQYXRoCiAgICAgICAgZmlsZXMsIGVyciA6PSBvcy5SZWFkRGlyKGJhY2t1cFBhdGgpCiAgICAgICAgaWYgZXJyICE9IG5pbCB7CiAgICAgICAgICAgICAgICBwcmludGxuKCJFUlJPUjogZXJyb3IgcmVhZGluZyBjb250ZW50IG9mIiArIGJhY2t1cFBhdGggKyAiIHBsZWFzZSByZWFkIHRoZSBlcnJvciBmb2xsb3dpbmc6ICIgKyBlcnIuRXJyb3IoKSkKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICBwcmludGxuKG9zLkdldHdkKCkpCiAgICAgICAgLy8gbCd1bHRpbW8gZmlsZSDDqCBxdWVsbG8gcGnDuSByZWNlbnRlCiAgICAgICAgaWYgbGVuKGZpbGVzKSA+IDEgewogICAgICAgICAgICAgICAgcHJpbnRsbihmaWxlc1tsZW4oZmlsZXMpLTFdLk5hbWUoKSkKICAgICAgICB9Cn0KClNVQ0NFU1M6IHN1Y2Nlc3NmdWxseSBiYWNrdXBwZWQgbXkgY2xpcGJvYXJkIGhpc3RvcnksIGhvb3JheQogU1VDQ0VTUzogc3VjY2Vzc2Z1bGx5IGJhY2t1cHBlZCBteSBjbGlwYm9hcmQgaGlzdG9yeSwgaG9vcmF5ClNUUklOR1ZBTFVFOiBsZW4oZmlsZXMpLTFdLk5hbWUoKQpTVFJJTkdWQUxVRTogZmlsZXNbbGVuKGZpbGVzKS0xXS5OYW1lKCkKU1VDQ0VTUzogc3VjY2Vzc2Z1bGx5IGJhY2t1cHBlZCBteSBjbGlwYm9hcmQgaGlzdG9yeSwgaG9vcmF5Cl5DR1JBQ0VGVUxMWSBTSFVURE9XTgogbWF0dGVvIO6CsCDugqAgYmFja3VwIO6CsCB+IO6CsSBwcm9ncmFtbWF6aW9uZSDugrEgR29DbGlwYm9hcmQg7oKxIEdvSGlzdG9yeSDugrAgMSDugrAgXkMKIG1hdHRlbyDugrAg7oKgIGJhY2t1cCDugrAgfiDugrEgcHJvZ3JhbW1hemlvbmUg7oKxIEdvQ2xpcGJvYXJkIO6CsSBHb0hpc3Rvcnkg7oKwIFNJR0lOVCDugrAgbGwKdG90YWxlIDRNCmRyd3hyd3hyLXggNiBtYXR0ZW8gbWF0dGVvIDFNIGdpdSAxOSAwODozNyAuLwpkcnd4cnd4ci14IDMgbWF0dGVvIG1hdHRlbyAxTSBnaXUgMTcgMjI6MzMgLi4vCmRyd3hyLXhyLXggMiBtYXR0ZW8gbWF0dGVvIDFNIGdpdSAxOSAwODo0MCBiYWNrdXAvCi1yd3hyd3hyLXggMSBtYXR0ZW8gbWF0dGVvIDFNIGdpdSAxOSAwODozNiBjbGlwR3VpLnNoKgotcnctcnctci0tIDEgbWF0dGVvIG1hdHRlbyAxTSBnaXUgMTggMTE6MDMgY29uZmlnLnhtbAotcnctcnctci0tIDEgbWF0dGVvIG1hdHRlbyAxTSBnaXUgMTkgMDg6MzkgZHVtcC50eHQKZHJ3eHJ3eHIteCA4IG1hdHRlbyBtYXR0ZW8gMU0gZ2l1IDE5IDA5OjM2IC5naXQvCi1ydy1ydy1yLS0gMSBtYXR0ZW8gbWF0dGVvIDFNIGdpdSAxNCAxNjowMCBnb0NsaXBib2FyZEFydC5qcGcKLXJ3eHJ3eHIteCAxIG1hdHRlbyBtYXR0ZW8gNE0gZ2l1IDE0IDE1OjUwIGdvQ2xpcGJvYXJkRXhlY3V0YWJsZSoKLXJ3LXJ3LXItLSAxIG1hdHRlbyBtYXR0ZW8gMU0gZ2l1IDE0IDE1OjE1IGdvLm1vZAotcnctcnctci0tIDEgbWF0dGVvIG1hdHRlbyAxTSBnaXUgMTQgMTU6MTUgZ28uc3VtCmRyd3hyd3hyLXggMiBtYXR0ZW8gbWF0dGVvIDFNIGdpdSAxOSAwOTozNiBqb2JzLwotcnctcnctci0tIDEgbWF0dGVvIG1hdHRlbyAxTSBnaXUgMTQgMTU6MTUgbWFpbi5nbwpkcnd4cnd4ci14IDMgbWF0dGVvIG1hdHRlbyAxTSBnaXUgMTcgMjE6NDggbW9kZWxzLwotcnctcnctci0tIDEgbWF0dGVvIG1hdHRlbyAxTSBnaXUgMTQgMTY6MDIgUkVBRE1FLm1kCiBtYXR0ZW8g7oKwIO6CoCBiYWNrdXAg7oKwIH4g7oKxIHByb2dyYW1tYXppb25lIO6CsSBHb0NsaXBib2FyZCDugrEgR29IaXN0b3J5IO6CsCBsbCBiYWNrdXAvCnRvdGFsZSAxTQpkcnd4ci14ci14IDIgbWF0dGVvIG1hdHRlbyAxTSBnaXUgMTkgMDg6NDAgLi8KZHJ3eHJ3eHIteCA2IG1hdHRlbyBtYXR0ZW8gMU0gZ2l1IDE5IDA4OjM3IC4uLwotcnctcnctci0tIDEgbWF0dGVvIG1hdHRlbyAxTSBnaXUgMTkgMDg6MzcgMjAyNDA2MTkwODM3MDEKLXJ3LXJ3LXItLSAxIG1hdHRlbyBtYXR0ZW8gMU0gZ2l1IDE5IDA4OjM4IDIwMjQwNjE5MDgzODAxCi1ydy1ydy1yLS0gMSBtYXR0ZW8gbWF0dGVvIDFNIGdpdSAxOSAwODozOSAyMDI0MDYxOTA4MzkwMQotcnctcnctci0tIDEgbWF0dGVvIG1hdHRlbyAxTSBnaXUgMTkgMDg6NDAgMjAyNDA2MTkwODQwMDEKIG1hdHRlbyDugrAg7oKgIGJhY2t1cCDugrAgfiDugrEgcHJvZ3JhbW1hemlvbmUg7oKxIEdvQ2xpcGJvYXJkIO6CsSBHb0hpc3Rvcnkg7oKwIGNhdCAyMDI0MDYxOTA4MzkwMQpjYXQ6IDIwMjQwNjE5MDgzOTAxOiBGaWxlIG8gZGlyZWN0b3J5IG5vbiBlc2lzdGVudGUKIG1hdHRlbyDugrAg7oKgIGJhY2t1cCDugrAgfiDugrEgcHJvZ3JhbW1hemlvbmUg7oKxIEdvQ2xpcGJvYXJkIO6CsSBHb0hpc3Rvcnkg7oKwIDEg7oKwIGNhdCBiYWNrdXAvw7kyMDI0MDYxOTA4MzkwMQpjYXQ6IGJhY2t1cC/DuTIwMjQwNjE5MDgzOTAxOiBGaWxlIG8gZGlyZWN0b3J5IG5vbiBlc2lzdGVudGUKIG1hdHRlbyDugrAg7oKgIGJhY2t1cCDugrAgfiDugrEgcHJvZ3JhbW1hemlvbmUg7oKxIEdvQ2xpcGJvYXJkIO6CsSBHb0hpc3Rvcnkg7oKwIDEg7oKwIGNhdCBiYWNrdXAvMjAyNDA2MTkwODM5MDEK77+9IG1hdHRlbyDugrAg7oKgIGJhY2t1cCDugrAgfiDugrEgcHJvZ3JhbW1hemlvbmUg7oKxIEdvQ2xpcGJvYXJkIO6CsSBHb0hpc3Rvcnkg7oKwIGZpbGUgYmFja3VwLzIwMjQwNjE5MDgKMjAyNDA2MTkwODM3MDEgIDIwMjQwNjE5MDgzODAxICAyMDI0MDYxOTA4MzkwMSAgMjAyNDA2MTkwODQwMDEgIAogbWF0dGVvIO6CsCDugqAgYmFja3VwIO6CsCB+IO6CsSBwcm9ncmFtbWF6aW9uZSDugrEgR29DbGlwYm9hcmQg7oKxIEdvSGlzdG9yeSDugrAgZmlsZSBiYWNrdXAvMjAyNDA2MTkwODQwMDEgCmJhY2t1cC8yMDI0MDYxOTA4NDAwMTogZ3ppcCBjb21wcmVzc2VkIGRhdGEsIG9yaWdpbmFsIHNpemUgbW9kdWxvIDJeMzIgNDI3ODE5MDA4MCBnemlwIGNvbXByZXNzZWQgZGF0YSwgcmVzZXJ2ZWQgbWV0aG9kLCBBU0NJSSwgaGFzIENSQywgZXh0cmEgZmllbGQsIGhhcyBjb21tZW50LCBlbmNyeXB0ZWQsIGZyb20gRkFUIGZpbGVzeXN0ZW0gKE1TLURPUywgT1MvMiwgTlQpLCBvcmlnaW5hbCBzaXplIG1vZHVsbyAyXjMyIDQyNzgxOTAwODAKIG1hdHRlbyDugrAg7oKgIGJhY2t1cCDugrAgfiDugrEgcHJvZ3JhbW1hemlvbmUg7oKxIEdvQ2xpcGJvYXJkIO6CsSBHb0hpc3Rvcnkg7oKwIGdvIHJ1biBtYWluLmdvIApbMS8xMF0weGMwMDAwZjIwMDAKU1RSSU5HVkFMVUU6IG5maWcgZmlsZQogICAgICAgIF8sIGVyciA6PSBvcy5TdGF0KCIvaG9tZS9tYXR0ZW8vcHJvZ3JhbW1hemlvbmUvR29DbGlwYm9hcmQvR29IaXN0b3J5L2NvbmZpZy54bWwiIC8qIG9zLkFyZ3NbMV0gKi8pCiAgICAgICAgaWYgZXJyICE9IG5pbCB7CiAgICAgICAgICAgICAgICBwcmludGxuKCJFUlJPUjogRmlsZSBkb2VzIG5vdCBleGlzdCBnb2RkYW1pdCIpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgLy9pZiB0aGVyZSBpcyB0aGUgY29uZmlnZmlsZSwgZHVtcCBhbmQgdW5tYXJzaGFsbAogICAgICAgIGR1bXAsIGVyciA6PSBvcy5SZWFkRmlsZSgiL2hvbWUvbWF0dGVvL3Byb2dyYW1tYXppb25lL0dvQ2xpcGJvYXJkL0dvSGlzdG9yeS9jb25maWcueG1sIiAvKiBvcy5BcmdzWzFdICovKQogICAgICAgIGlmIGVyciAhPSBuaWwgewogICAgICAgICAgICAgICAgcHJpbnRsbigiRVJST1I6IENhbm5vdCBsb2FkIGNvbmZpZ3VyYXRpb24iKQogICAgICAgICAgICAgICAgcGFuaWMoZXJyKQogICAgICAgIH0KCiAgICAgICAgLy91bm1hcnNoYWwgc3RydWN0ClNUUklOR1ZBTFVFOiBwYWNrYWdlIG1vZGVscwoKaW1wb3J0ICgKICAgICAgICAiZW5jb2RpbmcveG1sIgogICAgICAgICJvcyIKKQoKdHlwZSBDb25maWd1cmF0aW9uIHN0cnVjdCB7CiAgICAgICAgWE1MTmFtZSAgICAgICAgICAgeG1sLk5hbWUgYHhtbDoiQ29uZmlndXJhdGlvbiJgCiAgICAgICAgQ2xpcEd1aSAgICAgICAgICAgc3RyaW5nICAgYHhtbDoiY2xpcEd1aSJgCiAgICAgICAgRHVtcEZpbGVQYXRoICAgICAgc3RyaW5nICAgYHhtbDoiRHVtcEZpbGVQYXRoImAKICAgICAgICBCdWZmZXJMZW5naHQgICAgICBpbnQgICAgICBgeG1sOiJCdWZmZXJMZW5naHQiYAogICAgICAgIEJhY2tVcEZyZXF1ZW5jeSAgIHN0cmluZyAgIGB4bWw6IkJhY2tVcEZyZXF1ZW5jeSJgCiAgICAgICAgQmFja1VTcHRyYXRlZ3kgICAgc3RyaW5nICAgYHhtbDoiQmFja1VwU3RyYXRlZ3kiYAogICAgICAgIEJhY2tVcFN0b3JhZ2VQYXRoIHN0cmluZyAgIGB4bWw6IkJhY2tVcFN0b3JhZ2VQYXRoImAKfQoKZnVuYyAoYyAqQ29uZmlndXJhdGlvbikgTG9hZENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgLy9sb2FkIHBhdGggb2YgY29uZmlndXJhdGlvbgoKICAgICAgICAvL2NoZWNrIGlmIGZpbGUgZXhpc3QgaW4gcm9vdCBkaXJlY3RvcnkKICAgICAgICAvL2FyZ3NbMV0gY29udGFpbnMgdGhlIHBhdGggdG8gdGhlIGNvbmZpZyBmaWxlCiAgICAgICAgXywgZXJyIDo9IG9zLlN0YXQoIi9ob21lL21hdHRlby9wcm9ncmFtbWF6aW9uZS9Hb0NsaXBib2FyZC9Hb0hpc3RvcnkvY29uZmlnLnhtbCIgLyogb3MuQXJnc1sxXSAqLykKICAgICAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICAgICAgICAgIHByaW50bG4oIkVSUk9SOiBGaWxlIGRvZXMgbm90IGV4aXN0IGdvZGRhbWl0IikKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICAvL2lmIHRoZXJlIGlzIHRoZSBjb25maWdmaWxlLCBkdW1wIGFuZCB1bm1hcnNoYWxsCiAgICAgICAgZHVtcCwgZXJyIDo9IG9zLlJlYWRGaWxlKCIvaG9tZS9tYXR0ZW8vcHJvZ3JhbW1hemlvbmUvR29DbGlwYm9hcmQvR29IaXN0b3J5L2NvbmZpZy54bWwiIC8qIG9zLkFyZ3NbMV0gKi8pCiAgICAgICAgaWYgZXJyICE9IG5pbCB7CiAgICAgICAgICAgICAgICBwcmludGxuKCJFUlJPUjogQ2Fubm90IGxvYWQgY29uZmlndXJhdGlvbiIpCiAgICAgICAgICAgICAgICBwYW5pYyhlcnIpCiAgICAgICAgfQoKICAgICAgICAvL3VubWFyc2hhbCBzdHJ1Y3QKICAgICAgICBlcnIgPSB4bWwuVW5tYXJzaGFsKGR1bXAsIGMpCiAgICAgICAgaWYgZXJyICE9IG5pbCB7CiAgICAgICAgICAgICAgICBwYW5pYyhlcnIpCiAgICAgICAgfQp9CgpTVFJJTkdWQUxVRTogLy90aGlzIGZpbGUgd2lsbCBkZWZpbmUgZXZlcnl0aGluZyBuZWVkZWQgdG8gcnVuIGJhY2t1cCBqb2Igb24gdGhlIGNsaXBib2FyZCBmaWxlCgpwYWNrYWdlIG1vZGVscwoKaW1wb3J0ICgKICAgICAgICAiYnl0ZXMiCiAgICAgICAgImNvbXByZXNzL2d6aXAiCikKCnR5cGUgQ29uY3JldGVCYWNrVXBTdHJhdGVneSBpbnRlcmZhY2UgewogICAgICAgIERvKHNjaGVkdWxlIHN0cmluZykKICAgICAgICBJbml0QmFja3VwKGMgKkNvbmZpZ3VyYXRpb24pCn0KCnR5cGUgSW50ZXJuSm9iIHN0cnVjdCB7CiAgICAgICAgZmlsZXBhdGggc3RyaW5nCn0KCnR5cGUgQmFja3VwIHN0cnVjdCB7CiAgICAgICAgQmFja3VwICAgQ29uY3JldGVCYWNrVXBTdHJhdGVneQogICAgICAgIFNjaGVkdWxlIHN0cmluZwogICAgICAgIEtleXMgICAgIHN0cmluZwp9CgpmdW5jIChjICpCYWNrdXApIEV4ZWN1dGVCYWNrdXAoKSB7CiAgICAgICAgYy5CYWNrdXAuRG8oYy5TY2hlZHVsZSkKfQoKZnVuYyAoYyAqQmFja3VwKSBTZXR1cEJhY2t1cChjb25maWcgKkNvbmZpZ3VyYXRpb24pIHsKICAgICAgICBzd2l0Y2ggY29uZmlnLkJhY2tVU3B0cmF0ZWd5IHsKICAgICAgICBjYXNlICJmaWxlc3lzdGVtIjoKICAgICAgICAgICAgICAgIGMuQmFja3VwID0gbmV3KEZpbGVTeXN0ZW1CYWNrdXApCiAgICAgICAgY2FzZSAiYXdzIjoKICAgICAgICAgICAgICAgIGMuQmFja3VwID0gbmV3KEFXU0JhY2t1cHBlcikKICAgICAgICB9CiAgICAgICAgYy5TY2hlZHVsZSA9IGNvbmZpZy5CYWNrVXBGcmVxdWVuY3kKICAgICAgICBjLkJhY2t1cC5Jbml0QmFja3VwKGNvbmZpZykKfQoKZnVuYyBDcmVhdGVDb21wcmVzc2VkTG9nKGR1bXAgW11ieXRlKSAoW11ieXRlLCBlcnJvcikgewogICAgICAgIHZhciBieXRlc0J1ZmYgYnl0ZXMuQnVmZmVyCiAgICAgICAgd3JpdGVyIDo9IGd6aXAuTmV3V3JpdGVyKCZieXRlc0J1ZmYpCiAgICAgICAgXywgZXJyIDo9IHdyaXRlci5Xcml0ZShkdW1wKQogICAgICAgIHdyaXRlci5GbHVzaCgpCiAgICAgICAgZGVmZXIgd3JpdGVyLkNsb3NlKCkKICAgICAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICAgICAgICAgIHJldHVybiBuaWwsIGVycgogICAgICAgIH0=
